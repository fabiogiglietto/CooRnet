<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Fabio Giglietto" />


<title>CooRnet: an r package to detect coordinated link sharing behaviour</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><img id='coornet-logo' src='logo_small.png'/></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Intro</a>
</li>
<li>
  <a href="abc.html">CooRnet and the A-B-C Framework</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="tutorial00.html">MediCloud</a>
    </li>
    <li>
      <a href="tutorial01.html">CT Historical tutorial</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fabiogiglietto/CooRnet/">
    <span class="fas fa-github"></span>
     
    GitHub
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106971-17"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-106971-17');
</script>
</head>
<div style="margin-top:15px;">
<p><img src="https://docs.google.com/drawings/d/e/2PACX-1vQ8V_WGl9RZ7rYzWA6sfXhbODgsZv4UwJGgS3sgoE3b_wXLh-3zJYRWtHwLyXveLZkmSW7C1iZAqC6w/pub?w=414&amp;h=113" /></p>
<p><em><a href="https://twitter.com/fabiogiglietto">Fabio Giglietto</a>, <a href="https://github.com/nicolarighetti">Nicola Righetti</a>, <a href="https://github.com/lrossi79">Luca Rossi</a></em></p>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>Given a set of URLs, this package detects coordinated link sharing behavior (CLSB) and outputs the network of entities that performed such behavior.</p>
</div>
<div id="what-do-we-mean-by-coordinated-link-sharing-behavior" class="section level2">
<h2>What do we mean by coordinated link sharing behavior?</h2>
<p>CLSB refers to a specific coordinated activity performed by a network of Facebook pages, groups and verified public profiles (Facebook public entities) that repeatedly shared the same news articles in a very short time from each other.</p>
<p>To identify such networks, we designed, implemented and tested an algorithm that detects sets of Facebook public entities which performed CLSB by (1) estimating a time threshold that identifies URLs shares performed by multiple distinguished entities within an unusually short period of time (as compared to the entire dataset), and (2) grouping the entities that repeatedly shared the same news story within this coordination interval. The rationale is that, while it may be common that several entities share the same URLs, it is unlikely, unless a consistent coordination exists, that this occurs within the time threshold and repeatedly.</p>
<p>See also <A HREF="#References">references</A> for a more detailed description and real-world applications.</p>
</div>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>You can install CooRnet from GitHub.</p>
<pre class="r"><code># install.packages(&quot;devtools&quot;)

library(&quot;devtools&quot;)
devtools::install_github(&quot;fabiogiglietto/CooRnet&quot;)</code></pre>
</div>
<div id="api-key" class="section level2">
<h2>API key</h2>
<p>This package requires a <A HREF="https://github.com/CrowdTangle/API">CrowdTangle API</A> key entry in your R environment file. The R environment file is loaded every time R is started/restarted.</p>
<p>The following steps show how to add the key to your R environment file.</p>
<ol style="list-style-type: decimal">
<li>Open your .Renviron file. The file is usually located in your home directory. If the file does not exist, just create one and name it .Renviron.</li>
<li>Add a new line and enter your API key in the following format: CROWDTANGLE_API_KEY=<YOUR_API_KEY>.</li>
<li>Save the file and restart your current R session to start using CooRnet.</li>
</ol>
</div>
<div id="usage" class="section level2">
<h2>Usage</h2>
<p>CooRnet requires a list of urls with respective publication date. Such list can be collected from various sources including CrowdTangle itself (e.g. Historical Data with a link post type filter), Twitter APIs (filtering for tweets with a url) and GDELT.</p>
<p>In this example, we use <A HREF="https://github.com/jandix/mediacloudr">mediacloudr</A>, an API Wrapper for the mediacloud.org API, to retrieve our initial list of news stories. Alternatively, is it also possible to use a CSV file exported from <A HREF="https://explorer.mediacloud.org/#/home">MediaCloud Explorer</A>.</p>
<pre class="r"><code>library(&quot;mediacloudr&quot;)

# add API key to your R environment file.
# Open your .Renviron file. The file is usually located in your home directory. If the file does not exist, just create one and name it .Renviron.
# Add a new line and enter your API key in the following format: MEDIACLOUD_API_KEY=&lt;YOUR_API_KEY&gt;.
# Save the file and restart your current R session to start using mediacloudr.

df &lt;- get_story_list(rows = 100,
                           fq = &quot;(text:coronavirus OR text:&#39;covid-19&#39; OR text:&#39;SARS-CoV-2&#39;) AND (tags_id_media:186572515 OR tags_id_media:186572435 OR tags_id_media:186572516 OR tags_id_media:162546808 OR tags_id_media:162546809) AND publish_date:[2020-03-02T00:00:00.000Z TO 2020-04-03T00:00:00.000Z]&quot;)

# Alternative using a file exported from MediaCloud Explorer and uploaded into r
# df &lt;- readr::read_csv(&quot;rawdata/MediaCloud_output.csv&quot;) # file exported from MediaCloud

library(&quot;CooRnet&quot;)

# get public shares of MediaCloud URLs on Facebook and Instagram (assumes a valid CROWDTANGLE_API_KEY in Env).
ct_shares.df &lt;- get_ctshares(df, url_column = &quot;url&quot;, date_column = &quot;publish_date&quot;, platforms = &quot;facebook,instagram&quot;, sleep_time = 1, nmax = 100, clean_urls = TRUE)

# get coordinated shares and networks
output &lt;- get_coord_shares(ct_shares.df = ct_shares.df)

# creates the output objects in the environment
# 1. ct_shares_marked.df: a dataframe that contains all the retrieved social media shares plus an extra boolean variable (is_coordinated) that identify if the shares was coordinated.
# 2. highly_connected_g: igraph graph of coordinated networks of pages/groups/accounts
# 3. highly_connected_coordinated_entities: a dataframe that lists coordinated entities and corresponding component
get_outputs(output)

# save highly_connected_coordinated_entities in .CSV format for further analysis
write.csv(highly_connected_coordinated_entities, file = &quot;highly_connected_coordinated_entities.csv&quot;)

# save highly_connected_g in .GRAPHML format for further analysis with Gephi or similar softwares
igraph::write.graph(highly_connected_g, file = &quot;highly_connected_g.graphml&quot;, format = &quot;graphml&quot;)
</code></pre>
<p>For a more step-by-step approach, you may want to take a look to our <A HREF="https://fabiogiglietto.github.io/CooRnet/TUTORIAL.html">MediaCloud+CooRnet tutorial</A>.</p>
</div>
<div id="advanced-usage" class="section level2">
<h2>Advanced Usage</h2>
<p>CooRnet also features additional functions that streamlines the analysis of coordinated networks.</p>
<div id="component-summary" class="section level3">
<h3>Component Summary</h3>
<p>get_component_summary creates an handy aggregated views of network properties including:</p>
<ol style="list-style-type: decimal">
<li>the proportion of coordinated shares over the total shares (coorshare_ratio)</li>
<li>the average coordinated score (avg_cooRscore)</li>
<li>a measure of dispersion (gini) in the distribution of domains coordinatedly shared by the component (0-1)</li>
<li>the top 5 coordinatedly shared domains (ranked by n. of shares)</li>
<li>the total number coordinatedly shared of domains</li>
</ol>
<p>Usage is simple:</p>
<pre class="r"><code>comp_summary &lt;- get_component_summary(output)

# save comp_summary in .CSV format for further analysis
write.csv(comp_summary, file = &quot;comp_summary.csv&quot;)
</code></pre>
</div>
<div id="top-urls" class="section level3">
<h3>Top URLs</h3>
<p>get_top_coord_urls creates a ranked list of best performing URLs shared by coordinated networks. URLs can be sorted by various criteria including “engagement” wich is a sum of comments, shares and reactions (likes and other reactions) gathered by that URL.</p>
<p>You can customize the behaviour of get_top_coord_urls by specifing that you want a rank of URLs per componenent (top URLs for each network) or not and specify the number of URLs you want the function to return.</p>
<pre class="r"><code>top_urls_per_components &lt;- get_top_coord_urls(output, order_by = &quot;engagement&quot;, component = TRUE, top = 10)

top_urls_all &lt;- get_top_coord_urls(output, order_by = &quot;engagement&quot;, component = FALSE, top = 10)

# save top_urls_per_components in .CSV format for further analysis
write.csv(top_urls_per_components, file = &quot;top_urls_per_components.csv&quot;)

# save top_urls_all in .CSV format for further analysis
write.csv(top_urls_all, file = &quot;top_urls_all.csv&quot;)
</code></pre>
</div>
<div id="top-shares" class="section level3">
<h3>Top Shares</h3>
<p>get_top_coord_shares creates a ranked list of best performing posts with link (shares) published by coordinated networks. Shares can be sorted by various criteria including “engagement” wich is of comments, shares and reactions (likes and other reactions) gathered by that post.</p>
<p>You can customize the behaviour of get_top_coord_shares by specifing that you want a rank of URLs per componenent (top shares for each network) or not and specify the number of URLs you want the function to return.</p>
<pre class="r"><code>top_shares_per_components &lt;- get_top_coord_shares(output, order_by = &quot;engagement&quot;, component = TRUE, top = 10)

top_shares_all &lt;- get_top_coord_shares(output, order_by = &quot;engagement&quot;, component = FALSE, top = 10)

# save top_shares_per_components in .CSV format for further analysis
write.csv(top_shares_per_components, file = &quot;top_shares_per_components.csv&quot;)

# save top_shares_all in .CSV format for further analysis
write.csv(top_shares_all, file = &quot;top_shares_all.csv&quot;)
</code></pre>
</div>
</div>
<div id="acknowledgements" class="section level2">
<h2>Acknowledgements</h2>
<p>CooRnet has been developed as part of <a href="https://sites.google.com/uniurb.it/mine/home">Patterns of Facebook Interactions around Insular and Cross-Partisan Media Sources in the Run-up of the 2018 Italian Election</a> research project activities.</p>
<p>The project is supported, in part, by a grant by a grant from Social Science Research Council. Data and tools provided by Facebook.</p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<ul>
<li><p>Giglietto, F., Righetti, N., Rossi, L., &amp; Marino, G. (2020). Coordinated Link Sharing Behavior as a Signal to Surface Sources of Problematic Information on Facebook. International Conference on Social Media and Society, 85–91. <a href="https://doi.org/10.1145/3400806.3400817" class="uri">https://doi.org/10.1145/3400806.3400817</a></p></li>
<li><p>Giglietto, F., Righetti, N., Rossi, L., &amp; Marino, G. (2020). It takes a village to manipulate the media: coordinated link sharing behavior during 2018 and 2019 Italian elections. Information, Communication and Society, 1–25. <a href="https://doi.org/10.1080/1369118X.2020.1739732" class="uri">https://doi.org/10.1080/1369118X.2020.1739732</a></p></li>
<li><p>Giglietto, F., Righetti, N., &amp; Marino, G. (2019). Understanding Coordinated and Inauthentic Link Sharing Behavior on Facebook in the Run-up to 2018 General Election and 2019 European Election in Italy. <a href="https://doi.org/10.31235/osf.io/3jteh" class="uri">https://doi.org/10.31235/osf.io/3jteh</a></p></li>
</ul>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
